#!/usr/bin/env bash
function load_address() {
  echo $(cat $MCD_ADDRESS_FILE | jq ".[\"$1\"]" |  tr -d '"')
}

test -z "$MCD_ADDRESS_FILE" && echo "MCD_ADDRESS_FILE needs to be set" && exit 1;
# TODO: replace with template that's written
export MCD_DEPLOY=$(load_address "MCD_DEPLOY")
export MCD_PROXY=$(load_address "PROXY_ACTIONS")
export CDP_MANAGER=$(load_address "CDP_MANAGER")
export MCD_JOIN_DAI=0x$(seth call "$MCD_DEPLOY" "daiJoin()(address)")
export MCD_VAT=0x$(seth call "$MCD_DEPLOY" "vat()(address)")
export MCD_DAI=0x$(seth call "$MCD_DEPLOY" "dai()(address)")
